<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ktdsuniversity.edu.pms.employee.dao.EmployeeDao">

	<resultMap type="com.ktdsuniversity.edu.pms.employee.vo.EmployeeVO"
			   id="employeeVOMap"
			   autoMapping="true">
		<id column="EMP_ID" property="empId"/>
		<association property="departmentVO"
					 javaType="com.ktdsuniversity.edu.pms.department.vo.DepartmentVO">
			<id column="DEPT_ID" property="deptId"/>
			<result column="NAME" property="name"/>
			<result column="D_DEL_YN" property="delYn"/>
		</association>
	</resultMap>
<select id="getAllEmployeeCount" resultType="_int">
	SELECT COUNT(1)
	  FROM EMPLOYEE E
</select>
<!-- 
<select id="searchEmployeeAllCount" 
		parameterType="com.ktdsuniversity.edu.pms.employee.vo.SearchEmployeeVO"
		resultType="_int">
	SELECT COUNT(1)
	  FROM EMPLOYEE E
	  JOIN DEPARTEMNT D
		ON D.DEPT_ID = E.DEPT_ID
	  JOIN JOB J
	    ON J.JOB_ID = E.JOB_ID
	 WHERE D.DEL_YN = 'N'	
	  <if test='SearchKeyWord != null and SearchKeyWord != "" '>
	  	<choose>
	  		<when test='searchType == "employee_name"'>
	  		AND E.EMP_NAME LIKE '%' || #{searchKeyWord} || '%'
	  		</when>
	  		<when test='searchType == "department_name"'>
	  		AND D.DEPT_NAME LIKE '%' || #{searchKeyWord} || '%'
	  		</when>
	  		<when test='searchType == "job_name"'>
	  		AND J.JOB_NAME LIKE '%' || #{searchKeyWord} || '%'
	  		</when>
	  	</choose>
	  </if>
</select> 
 -->
<select id="getAllEmployee" resultMap="employeeVOMap">
	 SELECT E.EMP_ID
	 , E.EMP_NAME
	 , E.WORK_STS
	 , E.SAL_YEAR
	 , E.PRFL
	 , TO_CHAR(E.HIRE_DT, 'YYYY-MM-DD')HIRE_DT 
	 , E.HIRE_YEAR
	 , TO_CHAR(E.END_DT, 'YYYY-MM-DD')END_DT
	 , TO_CHAR(E.REST_ST_DT,'YYYY-MM-DD' ) END_DT
	 , TO_CHAR(E.REST_END_DT,'YYYY-MM-DD' ) END_DT 
	 , E.CNTCT
	 , E.ADDR
	 , TO_CHAR(E.BRTH,'YYYY-MM-DD' )BRTH  
	 , E.EMAIL
	 , E.MNGR_YN
	 , E.ADMN_CODE
	 , E.DEPT_ID
	 , E.JOB_ID
	 , E.PSTN_ID
	 , E.PWD
	 , E.LGN_TRY
	 , E.SALT
	 , TO_CHAR(E.PWD_CN_DT,'YYYY-MM-DD' ) PWD_CN_DT
	 , TO_CHAR(E.LGN_TRY_DT,'YYYY-MM-DD HH:MM:SS' ) LGN_TRY_DT
	 , E.LGN_YN
  FROM EMPLOYEE e  
</select>



</mapper>